(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{438:function(t,a,e){"use strict";e.r(a);var s=e(42),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"环境准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[t._v("#")]),t._v(" 环境准备")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("host")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("zookeeper")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("kafka编号")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("kafka")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.32")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.33")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("TODO")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("129.0.4.34")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("✔️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("TODO")])])])]),t._v(" "),e("p",[t._v("zookeeper集群搭建请参考 "),e("RouterLink",{attrs:{to:"/notes/middleware/zookeeper/2.集群部署.html"}},[t._v("zookeeper集群搭建指南")])],1),t._v(" "),e("h1",{attrs:{id:"kafka安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka安装"}},[t._v("#")]),t._v(" kafka安装")]),t._v(" "),e("h2",{attrs:{id:"下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),e("p",[t._v("下载页面")]),t._v(" "),e("p",[t._v("http://kafka.apache.org/downloads.html")]),t._v(" "),e("p",[t._v("wget下载")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("wget https://mirrors.tuna.tsinghua.edu.cn/apache/kafka/2.5.0/kafka_2.12-2.5.0.tgz\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[t._v("#")]),t._v(" 解压")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("sudo tar -zxvf ~/Downloads/kafka_2.12-2.5.0.tgz -C /usr/local\ncd /usr/local \nsudo mv kafka_2.12-2.5.0/ kafka\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h2",{attrs:{id:"修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[t._v("#")]),t._v(" 修改配置文件")]),t._v(" "),e("p",[t._v("cd /usr/local/kafka/config && sudo vim server.properties")]),t._v(" "),e("ul",[e("li",[t._v("broker.id=3  # broker 的全局唯一编号，不能重复")]),t._v(" "),e("li",[t._v("delete.topic.enable=true # 删除 topic 功能使能")]),t._v(" "),e("li",[t._v("zookeeper.connect=129.0.4.32:2181,129.0.4.33:2181,129.0.4.34:2181")]),t._v(" "),e("li",[t._v("log.dirs=/data/kfkData # kafka 运行日志存放的路径")])]),t._v(" "),e("p",[e("strong",[t._v("注:")])]),t._v(" "),e("ul",[e("li",[t._v("集群环境下，修改配置文件，broker.id 不得重复")])]),t._v(" "),e("h2",{attrs:{id:"环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[t._v("#")]),t._v(" 环境变量")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# kafka\nexport KAFKA_HOME=/usr/local/kafka\nexport PATH=$PATH:$KAFKA_HOME/bin\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("source ~/.zhsrc")]),t._v(" "),e("h2",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),e("p",[t._v("sudo /usr/local/kafka/bin/kafka-server-start.sh -daemon /usr/local/kafka/config/server.properties")]),t._v(" "),e("p",[t._v("集群环境，所有机器都执行一遍")]),t._v(" "),e("p",[t._v("sudo JMX_PORT=9999 /usr/local/kafka/bin/kafka-server-start.sh -daemon /usr/local/kafka/config/server.properties")]),t._v(" "),e("h2",{attrs:{id:"关闭"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭"}},[t._v("#")]),t._v(" 关闭")]),t._v(" "),e("p",[t._v("sudo /usr/local/kafka/bin/kafka-server-stop.sh stop")])])}),[],!1,null,null,null);a.default=r.exports}}]);