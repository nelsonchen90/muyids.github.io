(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{526:function(s,e,a){"use strict";a.r(e);var t=a(42),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("怎么在终端里拿到浏览器的cookie呢？")]),s._v(" "),a("p",[s._v("每次查询cookie，总是要先打开浏览器，然后在设置选项中找，很麻烦")]),s._v(" "),a("p",[s._v("我们能不能写一个工具，直接在Terminal中获得相应网站的cookie呢？")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("下面，我们以mac系统中chrome浏览器为例，进行探索。。。")]),s._v(" "),a("p",[s._v("找到chrome浏览器的cookie文件所在位置"),a("code",[s._v("~/Library/Application Support/Google/Chrome/Profile 1/Cookies")])]),s._v(" "),a("p",[s._v("这个位置可能不一致，有些机器在"),a("code",[s._v("~/Library/Application Support/Google/Chrome/Default/Cookies")]),s._v("目录下")]),s._v(" "),a("p",[s._v("cookie文件是sqlite3数据库的文件格式，我们使用sqlite3加载")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/Library/Application"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" Support/Google/Chrome/Profile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" sqlite3 Cookies\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看数据库中有哪些表")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" .tables\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看cookies表结构")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" .schema cookies\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("得到表结构")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("CREATE TABLE cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    creation_utc INTEGER NOT NULL,\n    host_key TEXT NOT NULL,\n    name TEXT NOT NULL,\n    value TEXT NOT NULL,\n    path TEXT NOT NULL,\n    expires_utc INTEGER NOT NULL,\n    is_secure INTEGER NOT NULL,\n    is_httponly INTEGER NOT NULL,\n    last_access_utc INTEGER NOT NULL,\n    has_expires INTEGER NOT NULL DEFAULT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n    is_persistent INTEGER NOT NULL DEFAULT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n    priority INTEGER NOT NULL DEFAULT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n    encrypted_value BLOB DEFAULT "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(",\n    samesite INTEGER NOT NULL DEFAULT -1,\n    UNIQUE "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host_key, name, path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("哈哈，我们直接用sql语句查询相应字段，不就大功告成了，so easy!")]),s._v(" "),a("p",[s._v("等等...encrypted_value是什么鬼！！！")]),s._v(" "),a("p",[s._v("原来，chrome浏览器对cookie的value字段做了加密")]),s._v(" "),a("p",[s._v("解密算法参考："),a("code",[s._v("http://n8henrie.com/2014/05/decrypt-chrome-cookies-with-python/")])]),s._v(" "),a("p",[s._v("算法是用"),a("code",[s._v("mac os")]),s._v("的mock密码作为私钥，对value进行了AES加密；我们拿到"),a("code",[s._v("DerivedKey")]),s._v("进行解密即可得到原值")]),s._v(" "),a("p",[s._v("如果不想研究具体怎么解密的，直接看我的项目吧，基于golang实现")]),s._v(" "),a("p",[s._v("项目地址："),a("code",[s._v("https://github.com/muyids/chrome-cookie")])]),s._v(" "),a("p",[s._v("原文地址："),a("code",[s._v("http://www.muyids.com/posts/sqlite3-chrome-cookie/")])])])}),[],!1,null,null,null);e.default=n.exports}}]);