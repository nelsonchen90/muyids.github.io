(window.webpackJsonp=window.webpackJsonp||[]).push([[214],{398:function(s,a,t){"use strict";t.r(a);var e=t(42),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("shell命令集合")]),s._v(" "),t("h2",{attrs:{id:"进程相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程相关"}},[s._v("#")]),s._v(" 进程相关")]),s._v(" "),t("ul",[t("li",[s._v("nohup")])]),s._v(" "),t("p",[s._v("守护进程启动")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" execShell "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ps.log "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看nohup启动的进程")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jobs")]),s._v(" -l\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("awk")])]),s._v(" "),t("p",[s._v("awk提取进程ID")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" download "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("杀掉某进程")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" pm2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("lsof")])]),s._v(" "),t("p",[s._v("查看使用某端口的进程")]),s._v(" "),t("p",[s._v("lsof -i:8080")]),s._v(" "),t("ul",[t("li",[s._v("netstat")])]),s._v(" "),t("p",[s._v("查看使用某端口的进程")]),s._v(" "),t("p",[s._v("netstat -ap | grep 8080")]),s._v(" "),t("p",[s._v("找到进程ID后，查看其占用的端口")]),s._v(" "),t("p",[s._v("netstat -nap|grep 7779")]),s._v(" "),t("h2",{attrs:{id:"目录相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目录相关命令"}},[s._v("#")]),s._v(" 目录相关命令")]),s._v(" "),t("ul",[t("li",[s._v("cd")])]),s._v(" "),t("p",[s._v("进入指定目录")]),s._v(" "),t("ul",[t("li",[s._v("ls")])]),s._v(" "),t("p",[s._v("查看一级目录")]),s._v(" "),t("ul",[t("li",[s._v("tree")])]),s._v(" "),t("p",[s._v("查看多级目录")]),s._v(" "),t("p",[s._v("控制深度 "),t("code",[s._v("tree -L 3")])]),s._v(" "),t("ul",[t("li",[s._v("pwd")])]),s._v(" "),t("p",[s._v("显示当前工作目录")]),s._v(" "),t("ul",[t("li",[s._v("mkdir")])]),s._v(" "),t("ul",[t("li",[s._v("普通目录\nmkdir test")]),s._v(" "),t("li",[s._v("递归目录\nmkdir -P test/test1")]),s._v(" "),t("li",[s._v("创建指定权限目录\nmkdir -m 777 test3")])]),s._v(" "),t("ul",[t("li",[s._v("rm")])]),s._v(" "),t("p",[s._v("删除文件")]),s._v(" "),t("p",[s._v("自定义回收站功能")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("myrm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("D")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d%H%M%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$D")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$D")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"moved to '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$D")]),s._v(' ok"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rm")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myrm'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("mv")])]),s._v(" "),t("p",[s._v("移动")]),s._v(" "),t("ul",[t("li",[s._v("cp")])]),s._v(" "),t("p",[s._v("复制")]),s._v(" "),t("h2",{attrs:{id:"sed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sed"}},[s._v("#")]),s._v(" sed")]),s._v(" "),t("h2",{attrs:{id:"tr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tr"}},[s._v("#")]),s._v(" tr")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker rmi "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("docker images "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" none "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v("}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" "')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"touch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#touch"}},[s._v("#")]),s._v(" touch")]),s._v(" "),t("p",[s._v("常用来新建文件")]),s._v(" "),t("h2",{attrs:{id:"cat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cat"}},[s._v("#")]),s._v(" cat")]),s._v(" "),t("p",[s._v("查看文件内容")]),s._v(" "),t("p",[s._v("显示行号")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" -n test.log  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"nl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nl"}},[s._v("#")]),s._v(" nl")]),s._v(" "),t("p",[s._v("nl test.log")]),s._v(" "),t("p",[s._v("cat -n test.log")]),s._v(" "),t("h2",{attrs:{id:"more"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#more"}},[s._v("#")]),s._v(" more")]),s._v(" "),t("p",[s._v("逐页阅读")]),s._v(" "),t("ul",[t("li",[s._v("space下一页")]),s._v(" "),t("li",[s._v("b上一页")])]),s._v(" "),t("h2",{attrs:{id:"less"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#less"}},[s._v("#")]),s._v(" less")]),s._v(" "),t("p",[s._v("less 与 more 类似")]),s._v(" "),t("p",[s._v("less 在查看之前不会加载整个文件。")]),s._v(" "),t("h2",{attrs:{id:"head"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#head"}},[s._v("#")]),s._v(" head")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" vim.md\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"tail"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tail"}},[s._v("#")]),s._v(" tail")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" vim.md\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"which"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#which"}},[s._v("#")]),s._v(" which")]),s._v(" "),t("p",[s._v("查找某个文件命令")]),s._v(" "),t("ul",[t("li",[s._v("which  查看可执行文件的位置")]),s._v(" "),t("li",[s._v("whereis 查看文件的位置")]),s._v(" "),t("li",[s._v("locate   配合数据库查看文件位置。")]),s._v(" "),t("li",[s._v("find   实际搜寻硬盘查询文件名称。")])]),s._v(" "),t("h2",{attrs:{id:"whereis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#whereis"}},[s._v("#")]),s._v(" whereis")]),s._v(" "),t("p",[s._v("whereis命令只能用于程序名的搜索，而且只搜索二进制文件（参数-b）、man说明文件（参数-m）和源代码文件（参数-s）")]),s._v(" "),t("p",[s._v("和find相比，whereis查找的速度非常快，这是因为linux系统会将 系统内的所有文件都记录在一个数据库文件中，\n当使用whereis和下面即将介绍的locate时，会从数据库中查找数据，而不是像find命令那样，通 过遍历硬盘来查找，效率自然会很高。")]),s._v(" "),t("p",[s._v("但是该数据库文件并不是实时更新，默认情况下时一星期更新一次\n，因此，我们在用whereis和locate 查找文件时，有时会找到已经被删除的数据，\n或者刚刚建立文件，却无法查找到，原因就是因为数据库文件没有被更新。")]),s._v(" "),t("h2",{attrs:{id:"locate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#locate"}},[s._v("#")]),s._v(" locate")]),s._v(" "),t("p",[s._v("locate 让使用者可以很快速的搜寻档案系统内是否有指定的档案。\n其方法是先建立一个包括系统内所有档案名称及路径的数据库，之后当寻找时就只需查询这个数据库，\n而不必实际深入档案系统之中了。在一般的 distribution 之中，数据库的建立都被放在 crontab 中自动执行。")]),s._v(" "),t("p",[s._v("locate 查找的是本地数据库，效率较高，但数据库更新不够实时")]),s._v(" "),t("p",[t("strong",[s._v("更新数据库命令")])]),s._v(" "),t("ul",[t("li",[s._v("linux")])]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ updatedb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("macOX系统")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo /usr/libexec/locate.updatedb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("建立链接")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/libexec/locate.updatedb /usr/local/bin/updatedb\nupdatedb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"find"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#find"}},[s._v("#")]),s._v(" find")]),s._v(" "),t("p",[s._v("查找文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("find . -name 'filename'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查找目录下的所有文件中是否含有某个字符串")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('find . | xargs grep -r "查找的字符串"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"curl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#curl"}},[s._v("#")]),s._v(" curl")]),s._v(" "),t("p",[s._v("发起一个 HTTP 请求")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('curl -X POST http://localhost:3000/api/posts --data \'{"title":"controller", "content": "what is controller"}\' --header \'Content-Type:application/json; charset=UTF-8\'\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("HTTP 请求的内容就会是下面这样的")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('POST /api/posts HTTP/1.1\nHost: localhost:3000\nContent-Type: application/json; charset=UTF-8\n{"title": "controller", "content": "what is controller"}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"下载shell脚本并运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载shell脚本并运行"}},[s._v("#")]),s._v(" 下载shell脚本并运行")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("传递参数")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("curl http://foo.com/script.sh | bash -s arg1 arg2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"date"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#date"}},[s._v("#")]),s._v(" date")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('date "+%Y-%m-%d"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"dig命令详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dig命令详解"}},[s._v("#")]),s._v(" dig命令详解")]),s._v(" "),t("p",[s._v("dig跟nslookup都是DNS查询工具")]),s._v(" "),t("p",[s._v("dig，其实是一个缩写，即Domain Information Groper。")]),s._v(" "),t("h3",{attrs:{id:"基本的命令格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本的命令格式"}},[s._v("#")]),s._v(" 基本的命令格式")]),s._v(" "),t("p",[s._v("dig @dnsserver name querytype")]),s._v(" "),t("p",[t("strong",[s._v("举个栗子")])]),s._v(" "),t("p",[s._v("用google-DNS来查baidu.com的A记录")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("dig @8.8.8.8 www.baidu.com A\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("注意")])]),s._v(" "),t("ul",[t("li",[s._v("dig默认使用/etc/resolv.conf里的地址作为上连DNS服务器")]),s._v(" "),t("li",[s._v("querytype可以设置A/AAAA/PTR/MX/ANY等值，默认是查询A记录。")])]),s._v(" "),t("h3",{attrs:{id:"一些常用选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一些常用选项"}},[s._v("#")]),s._v(" 一些常用选项")]),s._v(" "),t("ul",[t("li",[s._v("-c选项，可以设置协议类型（class），包括IN(默认)、CH和HS。")]),s._v(" "),t("li",[s._v("-f选项，dig支持从一个文件里读取内容进行批量查询，这个非常体贴和方便。文件的内容要求一行为一个查询请求。")]),s._v(" "),t("li",[s._v("-4和-6两个选项，用于设置仅适用哪一种作为查询包传输协议，分别对应着IPv4和IPv6。")]),s._v(" "),t("li",[s._v("-t选项，用来设置查询类型，默认情况下是A，也可以设置MX等类型")]),s._v(" "),t("li",[s._v("-q选项，其实它本身是一个多余的选项，但是它在复杂的dig命令中又是那么的有用。-q选项可以显式设置你要查询的域名，这样可以避免和其他众多的参数、选项相混淆，提高了命令的可读性")]),s._v(" "),t("li",[s._v("-x选项，是逆向查询选项。可以查询IP地址到域名的映射关系。")])]),s._v(" "),t("h3",{attrs:{id:"dig特有的查询选项（query-option）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dig特有的查询选项（query-option）"}},[s._v("#")]),s._v(" dig特有的查询选项（query option）")]),s._v(" "),t("p",[s._v("和刚才的选项不同，dig还有一批所谓的“查询选项”，这批选项的使用与否，会影响到dig的查询方式或输出的结果信息，因此对于这批选项，dig要求显式的在其前面统一的加上一个“+”（加号），这样dig识别起来会更方便，同时命令的可读性也会更强。\ndig总共有42个查询选项，涉及到DNS信息的方方面面，如此多的查询选项，本文不会一一赘述，只会挑出最最常用的几个重点讲解。")]),s._v(" "),t("ul",[t("li",[s._v("【TCP代替UDP】")])]),s._v(" "),t("p",[s._v("众所周知，DNS查询过程中的交互是采用UDP的。如果你希望采用TCP方式，需要这样：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("dig +tcp www.baidu.com\n")])])]),t("ul",[t("li",[s._v("【默认追加域】")])]),s._v(" "),t("p",[s._v("大家直接看例子，应该就能理解“默认域”的概念了，也就能理解+domain=somedomain的作用了：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("dig +domain=baidu.com image\n")])])]),t("ul",[t("li",[s._v("【跟踪dig全过程】")])]),s._v(" "),t("p",[s._v("dig非常著名的一个查询选项就是+trace，当使用这个查询选项后，dig会从根域查询一直跟踪直到查询到最终结果，并将整个过程信息输出出来。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("dig +trace www.baidu.com\n")])])]),t("ul",[t("li",[s._v("【精简dig输出】")])]),s._v(" "),t("p",[s._v("使用+nocmd的话，可以节省输出dig版本信息。")]),s._v(" "),t("p",[s._v("使用+short的话，仅会输出最精简的CNAME信息和A记录，其他都不会输出")]),s._v(" "),t("p",[s._v("使用+nocomment的话，可以节省输出dig的详情注释信息。")]),s._v(" "),t("p",[s._v("使用+nostat的话，最后的统计信息也不会输出。")]),s._v(" "),t("h2",{attrs:{id:"du"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#du"}},[s._v("#")]),s._v(" du")]),s._v(" "),t("p",[s._v("常用于清理磁盘空间")]),s._v(" "),t("ul",[t("li",[s._v("df -- display free disk space")]),s._v(" "),t("li",[s._v("du -- display disk usage statistics")])]),s._v(" "),t("p",[s._v("查看子目录占用空间大小")]),s._v(" "),t("p",[s._v("du -lh --max-depth=1")]),s._v(" "),t("h2",{attrs:{id:"df"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#df"}},[s._v("#")]),s._v(" df")]),s._v(" "),t("p",[s._v("参考du")]),s._v(" "),t("h2",{attrs:{id:"man"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#man"}},[s._v("#")]),s._v(" man")]),s._v(" "),t("p",[s._v("命令手册")]),s._v(" "),t("h2",{attrs:{id:"sed-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sed-2"}},[s._v("#")]),s._v(" sed")]),s._v(" "),t("p",[s._v("修改文件的内容")]),s._v(" "),t("p",[s._v("sed -- stream editor, 流式处理方式")]),s._v(" "),t("p",[s._v("centos下")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('sed -i "s/oldstring/newstring/g" `grep oldstring -rl yourdir`\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Mac OS下")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('sed -i "" "s/oldstring/newstring/g" `grep oldstring -rl yourdir`\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"scp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scp"}},[s._v("#")]),s._v(" scp")]),s._v(" "),t("p",[s._v("同步文件")]),s._v(" "),t("p",[s._v("从本地到远程")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("scp local_file remote_username@remote_ip:remote_folder\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("从远程到本地")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("scp remote_username@remote_ip:remote_folder local_file\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"rsync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rsync"}},[s._v("#")]),s._v(" rsync")]),s._v(" "),t("p",[s._v("同步远目录")]),s._v(" "),t("p",[s._v("基于scp实现，支持断点续传")]),s._v(" "),t("p",[s._v('rsync -e "ssh -i ~/.ssh/authorized_keys" -avr src/ root@remote_ip:/opt')]),s._v(" "),t("h2",{attrs:{id:"telnet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#telnet"}},[s._v("#")]),s._v(" telnet")]),s._v(" "),t("p",[s._v("连接tcp服务器")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ telnet ${ipaddress} ${port} \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"nc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nc"}},[s._v("#")]),s._v(" nc")]),s._v(" "),t("p",[s._v("查看进程信息")]),s._v(" "),t("p",[t("strong",[s._v("杀进程常用")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ps -ef | grep pm2 | awk '{print $2}' | xargs kill -9\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"netstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#netstat"}},[s._v("#")]),s._v(" netstat")]),s._v(" "),t("p",[s._v("查看网络端口占用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("netstat -an | grep 3000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"lsof"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lsof"}},[s._v("#")]),s._v(" lsof")]),s._v(" "),t("p",[s._v("查看网络端口占用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("lsof -i:3000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"grep"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grep"}},[s._v("#")]),s._v(" grep")]),s._v(" "),t("p",[s._v("查找文件中是否包含某个字符串")]),s._v(" "),t("h2",{attrs:{id:"xargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xargs"}},[s._v("#")]),s._v(" xargs")]),s._v(" "),t("p",[s._v("之所以能用到这个命令，关键是由于很多命令不支持|管道来传递参数，而日常工作中有有这个必要，所以就有了xargs命令")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("find /sbin -perm +700 | ls -l       这个命令是错误的\nfind /sbin -perm +700 | xargs ls -l   这样才是正确的\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("xargs 可以读入 stdin 的资料，并且以空白字元或断行字元作为分辨，将 stdin 的资料分隔成为 arguments 。")])])}),[],!1,null,null,null);a.default=r.exports}}]);