(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{436:function(s,e,a){"use strict";a.r(e);var t=a(42),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"服务启动和停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务启动和停止"}},[s._v("#")]),s._v(" 服务启动和停止")]),s._v(" "),a("p",[s._v("kafka启动")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JMX_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v(" /app/kafka_2.12-2.5.0/bin/kafka-server-start.sh -daemon /app/kafka_2.12-2.5.0/config/server.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("kafka停止")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/app/kafka_2.12-2.5.0/bin/kafka-server-stop.sh stop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"指定server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定server"}},[s._v("#")]),s._v(" 指定server")]),s._v(" "),a("p",[s._v("开发环境")]),s._v(" "),a("ul",[a("li",[s._v("--zookeeper 129.0.4.37:2181,129.0.4.38:2181,129.0.4.39:2181")]),s._v(" "),a("li",[s._v("--bootstrap-server 129.0.4.37:9092,129.0.4.38:9092,129.0.4.39:9092")])]),s._v(" "),a("p",[s._v("测试环境：")]),s._v(" "),a("ul",[a("li",[s._v("--zookeeper 129.0.4.32:2181,129.0.4.33:2181,129.0.4.34:2181")]),s._v(" "),a("li",[s._v("--bootstrap-server 129.0.4.32:9092,129.0.4.33:9092,129.0.4.34:9092")])]),s._v(" "),a("h2",{attrs:{id:"topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#topic"}},[s._v("#")]),s._v(" topic")]),s._v(" "),a("h3",{attrs:{id:"查看当前服务器中所有topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看当前服务器中所有topic"}},[s._v("#")]),s._v(" 查看当前服务器中所有topic")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper 129.0.4.32:2181 --list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"查看某个topic的详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看某个topic的详情"}},[s._v("#")]),s._v(" 查看某个Topic的详情")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --describe --bootstrap-server 129.0.4.32:9092 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --describe --zookeeper 129.0.4.32:2181 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"创建topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建topic"}},[s._v("#")]),s._v(" 创建topic")]),s._v(" "),a("p",[s._v("topic的创建要通过zookpeer来创建")]),s._v(" "),a("p",[s._v("1个副本集，1个分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper 129.0.4.32:2181 --create --replication-factor 1 --partitions 1 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3个副本集，10个分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper 129.0.4.32:2181 --create --replication-factor 3 --partitions 10 --topic second\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("选项说明:")]),s._v(" "),a("ul",[a("li",[s._v("--topic 定义topic名称")]),s._v(" "),a("li",[s._v("--replication-factor 定义副本数(副本数不超过机器数)")]),s._v(" "),a("li",[s._v("--partitions 定义分区数(提高并发)")])]),s._v(" "),a("h3",{attrs:{id:"删除topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除topic"}},[s._v("#")]),s._v(" 删除topic")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --zookeeper 129.0.4.32:2181 --delete --topic second\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("注：")])]),s._v(" "),a("ul",[a("li",[s._v("删除topic操作，需要"),a("code",[s._v("server.properties")]),s._v("中设置"),a("code",[s._v("delete.topic.enable=true")]),s._v("，否则只是标记删除。")])]),s._v(" "),a("h3",{attrs:{id:"修改分区数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改分区数"}},[s._v("#")]),s._v(" 修改分区数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-topics.sh --bootstrap-server localhost:9092 --alter --topic first --partitions 6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息"}},[s._v("#")]),s._v(" 消息")]),s._v(" "),a("ul",[a("li",[s._v("生产消息命令：kafka-console-producer.sh")]),s._v(" "),a("li",[s._v("消费消息命令：kafka-console-consumer.sh")])]),s._v(" "),a("h3",{attrs:{id:"生产者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产者"}},[s._v("#")]),s._v(" 生产者")]),s._v(" "),a("p",[s._v("发送消息")]),s._v(" "),a("p",[s._v("创建生产者长连接：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-producer.sh --broker-list 129.0.4.32:9092 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("发送消息到指定分区")]),s._v(" "),a("h3",{attrs:{id:"消费者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消费者"}},[s._v("#")]),s._v(" 消费者")]),s._v(" "),a("p",[s._v("消费者可以用不同的方式进行消费")]),s._v(" "),a("h4",{attrs:{id:"默认消费模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认消费模式"}},[s._v("#")]),s._v(" 默认消费模式")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"从头消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从头消费"}},[s._v("#")]),s._v(" 从头消费")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --from-beginning --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"指定group消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定group消费"}},[s._v("#")]),s._v(" 指定group消费")]),s._v(" "),a("p",[s._v("group是消费者的最小单元")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --group fltrp_nodejs_group --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"指定分区消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定分区消费"}},[s._v("#")]),s._v(" 指定分区消费")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --partition 0 --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"指定offset消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定offset消费"}},[s._v("#")]),s._v(" 指定offset消费")]),s._v(" "),a("p",[s._v("指定offset时，必须指定分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-console-consumer.sh --bootstrap-server 129.0.4.32:9092 --partition 0 --offset 0 --topic first \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("选项：")]),s._v(" "),a("ul",[a("li",[s._v("--from-beginning: 会把主题中以往所有的数据都读取出来")]),s._v(" "),a("li",[s._v("--group <String: consumer group id>      The consumer group id of the consumer.")]),s._v(" "),a("li",[s._v("--partition <Integer: partition>         The partition to consume from. Consumption starts from the end of the partition unless '--offset' is specified.")]),s._v(" "),a("li",[s._v("--offset <String: consume offset>        The offset id to consume from (a non-negative number), or 'earliest' which means from beginning, or 'latest' which means from end (default: latest)")])]),s._v(" "),a("p",[s._v("注意：")]),s._v(" "),a("ul",[a("li",[s._v("The partition is required when offset is specified.")])]),s._v(" "),a("h2",{attrs:{id:"offset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offset"}},[s._v("#")]),s._v(" offset")]),s._v(" "),a("h3",{attrs:{id:"查看group的消费进度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看group的消费进度"}},[s._v("#")]),s._v(" 查看group的消费进度")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kafka-consumer-offset-checker --bootstrap-server localhost:9092 --group fltrp_nodejs_group  --topic first\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);